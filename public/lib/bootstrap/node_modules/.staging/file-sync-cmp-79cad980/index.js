'use strict';

var fs = require('fs');

var BUF_SIZE = 16 * 1024;

/* Compare two files by content. */
function equalFiles(pathA, pathB) {
    var statA = fs.lstatSync(pathA);
    var statB = fs.lstatSync(pathB);
    if (statA.size !== statB.size) {
        return false;
    }
    var fdA = fs.openSync(pathA, 'r');
    var fdB = fs.openSync(pathB, 'r');
    var bufA = new Buffer(BUF_SIZE);
    var bufB = new Buffer(BUF_SIZE);
    var readA = 1;
    var readB = 1;
    while (readA > 0) {
        readA = fs.r